import matplotlib.pyplot as plt
import numpy as np

# Data from the previous artifact
data = [
    [0.15344705927452632, 7.729612827301025, 7.5551629066467285],
    [0.18700267377767624, 4.641266822814941, 5.201022624969482],
    [0.2351361307838504, 5.708763599395752, 6.1019487380981445],
    [0.27203860020225074, 6.568876266479492, 7.315378189086914],
    [0.2789157578911596, 7.54668664932251, 7.046211242675781],
    [0.2972709202057949, 10.152636528015137, 10.257530212402344],
    [0.2993008519867593, 6.17930269241333, 6.468386650085449],
    [0.31661017039886774, 4.657238483428955, 5.130756378173828],
    [0.35826526485273447, 10.602204322814941, 10.87226390838623],
    [0.3854049818048542, 6.986067295074463, 6.920976161956787],
    [0.3874970967633177, 5.968084812164307, 6.954703330993652],
    [0.4206304791619362, 6.643346786499023, 7.083215713500977],
    [0.4261173547275445, 3.290358543395996, 4.216338157653809],
    [0.44874603062311313, 7.970234394073486, 7.7529778480529785],
    [0.4674719242906466, 10.172063827514648, 10.403958320617676],
    [0.4977640003053656, 5.4277777671813965, 5.554255962371826],
    [0.5302923721872681, 13.991959571838379, 13.018513679504395],
    [0.5371517476467893, 10.682600975036621, 10.029948234558105],
    [0.5455364332471297, 12.226179122924805, 10.144401550292969],
    [0.561659149306766, 11.997278213500977, 10.183938026428223],
    [0.5713606566784241, 11.408204078674316, 10.976055145263672],
    [0.5791044810740115, 7.691021919250488, 7.888357162475586],
    [0.6067783779931517, 13.399459838867188, 12.13795280456543],
    [0.611522689685346, 9.816544532775879, 9.604591369628906],
    [0.6134696406506192, 9.935108184814453, 8.257339477539062],
    [0.643361484703584, 8.005157470703125, 7.6300249099731445],
    [0.6462832196490946, 10.117098808288574, 9.772029876708984],
    [0.6473522997564771, 11.38731861114502, 9.305901527404785],
    [0.6486000308356453, 10.050582885742188, 10.867932319641113],
    [0.6690530621707071, 8.22446060180664, 8.398241996765137],
    [0.6800624971280214, 13.082642555236816, 12.163724899291992],
    [0.687098973947713, 10.16970443725586, 9.350008964538574],
    [0.6957082721946031, 11.383212089538574, 10.359537124633789],
    [0.7103379477403696, 12.066899299621582, 11.192468643188477],
    [0.7195693156326219, 7.162652969360352, 8.392411231994629],
    [0.74769311886629, 10.764470100402832, 9.312237739562988],
    [0.7625463920313309, 10.080269813537598, 9.658259391784668],
    [0.7651307077878915, 7.566110610961914, 6.956899166107178],
    [0.7728939125132246, 8.504623413085938, 8.82097053527832],
    [0.7845724950570215, 22.760984420776367, 12.324365615844727],
    [0.8009694126494469, 11.668362617492676, 11.08839225769043],
    [0.8046365639218741, 10.045522689819336, 10.407073020935059],
    [0.8058045668771058, 14.014678001403809, 11.946475982666016],
    [0.816647414739066, 9.51113224029541, 8.526612281799316],
    [0.8257420904858853, 12.172809600830078, 11.074254989624023],
    [0.8391340774870248, 12.571836471557617, 12.395567893981934],
    [0.8392669420393014, 9.934739112854004, 10.320608139038086],
    [0.8421128190450494, 12.14409351348877, 9.692646980285645],
    [0.8745032875867306, 12.952888488769531, 12.50015926361084],
    [0.8884435829021446, 10.289994239807129, 10.97478199005127],
    [0.9406806046687685, 13.545063972473145, 11.74545955657959],
    [0.9688116432000599, 10.477577209472656, 9.40739631652832],
    [0.9783685399684519, 11.637439727783203, 12.13165283203125],
    [0.9825197199038807, 14.852919578552246, 12.475924491882324],
    [1.0000929956759022, 12.121561050415039, 10.842573165893555],
    [1.0142435604922517, 15.175200462341309, 12.27527141571045],
    [1.0258498915533403, 10.440519332885742, 11.755654335021973],
    [1.0443035957038547, 13.81745719909668, 10.364412307739258],
    [1.077032961426901, 11.935506820678711, 11.821846008300781],
    [1.0846626203571321, 12.15864372253418, 11.879144668579102],
    [1.0933270325021693, 12.06845760345459, 12.045025825500488],
    [1.1498043311798751, 10.682170867919922, 10.522571563720703],
    [1.1729347807955908, 10.51403522491455, 10.5896577835083],
    [1.2208406939482317, 11.9071626663208, 10.602897644042969],
    [1.2283016730429053, 12.5629243850708, 11.871514320373535],
    [1.2356471988395392, 12.639452934265137, 12.06360912322998],
    [1.2387836776451326, 9.151453018188477, 8.339226722717285],
    [1.2428676518439121, 10.502961158752441, 11.171228408813477],
    [1.246921408910762, 16.541641235351562, 13.440560340881348],
    [1.2660252762089705, 13.665885925292969, 10.858932495117188],
    [1.2870528349683243, 12.63011646270752, 12.079073905944824],
    [1.2873511564448916, 13.628787994384766, 12.612030029296875],
    [1.3037308004338932, 13.723947525024414, 11.595357894897461],
    [1.306330739131557, 14.293305397033691, 14.178205490112305],
    [1.32073312974272, 24.82206916809082, 13.66558837890625],
    [1.3349790260524694, 12.874435424804688, 12.650156021118164],
    [1.369819331152835, 14.779020309448242, 14.584073066711426],
    [1.3915868639793925, 14.017687797546387, 14.636195182800293],
    [1.4478000552562498, 13.790258407592773, 13.025674819946289],
    [1.4742550661266183, 10.523107528686523, 9.938105583190918],
    [1.5149343220087135, 28.439573287963867, 17.706275939941406],
    [1.5880963446844147, 15.790892601013184, 14.507928848266602],
    [1.678500819183595, 14.070501327514648, 13.455846786499023],
    [1.6935787551808743, 11.212215423583984, 13.243489265441895],
    [1.735655495770978, 12.339221954345703, 12.096973419189453],
    [1.7883604222862908, 15.693655967712402, 12.865335464477539],
    [1.8176930433931908, 13.237418174743652, 10.85878849029541],
    [1.8287211378446961, 26.811975479125977, 17.141387939453125],
    [1.8410445404715228, 18.87255859375, 14.282699584960938],
    [1.9540954429095831, 14.386245727539062, 12.912137031555176],
    [1.9681120394936873, 12.406390190124512, 12.444461822509766],
    [1.9699873096037954, 11.850624084472656, 11.301597595214844],
    [1.9796065265602658, 18.330554962158203, 15.542852401733398],
    [2.604078723848417, 13.028779983520508, 13.879433631896973],
    [2.7429458616604157, 13.08798885345459, 15.12232494354248],
    [3.1272116973431783, 22.398759841918945, 17.108074188232422],
    [3.9390248793324476, 16.882841110229492, 16.921823501586914]
]

if __name__ == "__main__":
    # Convert to numpy array for easier manipulation
    data_array = np.array(data)


    # Define a function to calculate relative difference
    def relative_difference(a, b):
        return abs(a - b) / ((a + b) / 2)


    # Set a threshold for what we consider a "big discrepancy"
    threshold = 0.1

    # Filter the data points
    filtered_data = [point for point in data_array if relative_difference(point[1], point[2]) <= threshold]
    filtered_data = np.array(filtered_data)

    # Create the plot
    plt.figure(figsize=(12, 4))

    # Plot Input vs Second Number
    plt.subplot(131)
    plt.scatter(filtered_data[:, 0], filtered_data[:, 1], color='blue', alpha=0.7)
    plt.title('Input vs Second Number')
    plt.xlabel('Input')
    plt.ylabel('Second Number')

    # Plot Input vs Third Number
    plt.subplot(132)
    plt.scatter(filtered_data[:, 0], filtered_data[:, 2], color='red', alpha=0.7)
    plt.title('Input vs Third Number')
    plt.xlabel('Input')
    plt.ylabel('Third Number')

    # Plot Second Number vs Third Number
    plt.subplot(133)
    plt.scatter(filtered_data[:, 1], filtered_data[:, 2], color='green', alpha=0.7)
    plt.title('Second Number vs Third Number')
    plt.xlabel('Second Number')
    plt.ylabel('Third Number')

    plt.tight_layout()
    plt.show()

    # Print the number of points remaining after filtering
    print(f"Before filtering: {len(data)}")
    print(f"Number of points after filtering: {len(filtered_data)}")
